aws.region = 'eu-central-1'
aws.client.storageEncryption = 'AES256'
executor.name = 'awsbatch'
executor.awscli = '/home/ec2-user/miniconda/bin/aws'

process {
	
    queue = { task.attempt > 1 ? 'awsconvertexcess' : 'awsconvertworkload' }
    cpus = { 2 * task.attempt }
    memory = { task.attempt > 1 ? 7590.MB : 3670.MB }
    
    withName:centrifugeENA {
        queue = { task.attempt > 1 ? 'awsCentrifugeENAExcess' : 'awsCentrifugeENAWorkload' }
    	memory = { task.attempt > 1 ? 31100.MB : 15400.MB }	
        cpus = { task.attempt > 1 ? 16 : 8 }
    }
    
    withName:centrifugeRefSeq {
        queue = { task.attempt > 1 ? 'awsCentrifugeRefseqExcess' : 'awsCentrifugeENAExcess' }
    	memory = { task.attempt > 1 ? 70300.MB : 31100.MB }	
        cpus = { task.attempt > 1 ? 36 : 16 }
    }

}